package coolguysoft.com.spectremeltdownvulnerabilitydiagnostictoolkitadvanced;

import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.ProgressBar;
import android.widget.TextView;

import org.w3c.dom.Text;

import java.util.Timer;
import java.util.TimerTask;

public class vuln_checker extends AppCompatActivity {
    Button verifyButton;
    ProgressBar spinnerBar;
    TextView mainText;
    TextView checkingText;
    ImageView checkmark;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_vuln_checker);
        verifyButton = (Button)findViewById(R.id.button);
        spinnerBar = (ProgressBar)findViewById(R.id.spinnerBar);
        mainText = (TextView)findViewById(R.id.mainText);
        checkingText = (TextView)findViewById(R.id.checkingTextView);
        checkmark = (ImageView)findViewById(R.id.imageView);
    }

    public void buttonOnClick(View v) {
        verifyButton.setVisibility(View.INVISIBLE);
        mainText.setVisibility(View.INVISIBLE);
        spinnerBar.setVisibility(View.VISIBLE);
        checkingText.setVisibility(View.VISIBLE);
        Timer timer = new Timer();
        timer.schedule(new TimerTask() {
            @Override
            public void run() {
                runOnUiThread(successLoop);
            }
        }, 3500, 100000);
    }

    public Runnable successLoop = new Runnable() {
        @Override
        public void run() {
            checkingText.setText("Your device is free of vulnerabilities!");
            spinnerBar.setVisibility(View.INVISIBLE);
            checkmark.setVisibility(View.VISIBLE);
        }
    };
}
