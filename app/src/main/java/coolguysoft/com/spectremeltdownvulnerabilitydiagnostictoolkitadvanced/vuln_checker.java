package coolguysoft.com.spectremeltdownvulnerabilitydiagnostictoolkitadvanced;

import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.ProgressBar;
import android.widget.TextView;

import com.google.android.gms.ads.AdRequest;
import com.google.android.gms.ads.AdView;
import com.google.android.gms.ads.MobileAds;

import org.w3c.dom.Text;

import java.util.Timer;
import java.util.TimerTask;

public class vuln_checker extends AppCompatActivity {
    Button verifyButton;
    ProgressBar spinnerBar;
    TextView mainText;
    TextView checkingText;
    ImageView checkmark;
    AdView adView;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_vuln_checker);
        verifyButton = (Button) findViewById(R.id.button);
        spinnerBar = (ProgressBar) findViewById(R.id.spinnerBar);
        mainText = (TextView) findViewById(R.id.mainText);
        checkingText = (TextView) findViewById(R.id.checkingTextView);
        checkmark = (ImageView) findViewById(R.id.imageView);
        adView = (AdView) findViewById(R.id.adView);
        MobileAds.initialize(this,"ca-app-pub-3940256099942544/6300978111");
        AdRequest adRequest = new AdRequest.Builder().build();
        adView.loadAd(adRequest);
    }


    public void buttonOnClick(View v) {
        verifyButton.setVisibility(View.INVISIBLE);
        mainText.setVisibility(View.INVISIBLE);
        spinnerBar.setVisibility(View.VISIBLE);
        checkingText.setVisibility(View.VISIBLE);
        Timer timer = new Timer();
        timer.schedule(new TimerTask() {
            @Override
            public void run() {
                runOnUiThread(successLoop);
            }
        }, 3500, 100000);
    }

    public Runnable successLoop = new Runnable() {
        @Override
        public void run() {
            checkingText.setText("Your device is free of vulnerabilities!");
            spinnerBar.setVisibility(View.INVISIBLE);
            checkmark.setVisibility(View.VISIBLE);
        }
    };
}
